<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Survive Game</title>
    <link rel="stylesheet" href="style.css" media="screen" title="no title" charset="utf-8">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css" media="screen" title="no title" charset="utf-8">
    <script src="js/bootstrap.min.js"></script>
  </head>
  <body>
    <Header> Survive </header>

    </div>
      <div class="container">
        <img src="" alt="slot3" class="slot" id="slot3" />
        <img src="" alt="slot2" class="slot" id="slot2" />
        <img src="" alt="slot1" class="slot" id="slot1" />
      </div>
      <footer class="container">
        <div class="context3">3</div>
        <div class="context2">2</div>
        <div class="context1">1</div>
      </footer>
      <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title">EVENT</h4>
            </div>
            <div class="modal-body pone">
              <p>One fine body&hellip;</p>
            </div>
            <div class="modal-body ptwo">
              <p></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    <script>
    var stop = 0
    var currentPlayer
      game = {
        slots: $('.slot'),
        slot1: $('#slot1'),
        slot2: $('#slot2'),
        slot3: $('#slot3'),
        context1: $('.context1'),
        context2: $('.context2'),
        context3: $('.context3'),
        nextPath1: function(firstPath) {game.pickPath(firstPath.slot1, firstPath.slot2, firstPath.slot3)},
        nextPath2: function(secondPath) {game.pickPath(secondPath.slot1, secondPath.slot2, secondPath.slot3)},
        nextPath3: function(thirdPath) {game.pickPath(thirdPath.slot1, thirdPath.slot2, thirdPath.slot3)},
        pickPath: function(first, second, third) {
          axe()
          icepick()
          game.getPlayer()
          game.slot2.unbind('click')
          game.slot3.unbind('click')
          game.slot1.unbind('click')
          // first
          if (first.axe == true) {axeTrue()}
          if (first.icepick == true) {icepickTrue()}
          if (first.hammer == true) {hammerTrue()}
          if (first.gun == true) {gunTrue()}
          if (first.man == true) {manTrue()}
          if (first.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (first.health == true) {
          healthKill(first)
        console.log("im running")}
          if (first.truth == true) {
            game.slot1.on('click', function(){
              $('#myModal').modal()
              game.nextPath1(first)
              $('.ptwo').text(first.textPop)
              $('.pone').html('<img src ="' + first.imagePop + '">')
              })
          }
          game.slot1.attr('src', first.image)
          game.context1.text(first.context)

          // second
          if (second.axe == true) {axeTrue()}
          if (second.icepick == true) {icepickTrue()}
          if (second.hammer == true) {hammerTrue()}
          if (second.gun == true) {gunTrue()}
          if (second.man == true) {manTrue()}
          if (second.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (second.health == true){
          healthKill(second)
          console.log("im running")
        }
          if (second.truth == true) {
          game.slot2.on('click',function(){
            box()
            $('#myModal').modal()
            game.nextPath2(second)
            $('.ptwo').text(second.textPop)
            $('.pone').html('<img src ="' + second.imagePop + '">')})
          }
          game.slot2.attr('src', second.image)
          game.context2.text(second.context)
          // third
          if (third.axe == true) {axeTrue()}
          if (third.icepick == true) {icepickTrue()}
          if (third.hammer == true) {hammerTrue()}
          if (third.gun == true) {gunTrue()}
          if (third.man == true) {manTrue()}
          if (third.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (third.health == true){
          healthKill(third)
        console.log("im running")}
          if (third.truth == true) {
            game.slot3.on('click',function(){
            $('#myModal').modal()
            game.nextPath3(third)
            $('.ptwo').text(third.textPop)
            $('.pone').html('<img src ="' + third.imagePop + '">')})
          }
          game.slot3.attr('src', third.image)
          game.context3.text(third.context)
        },
        paths: {
          slot1: {
            // 1
            imagePop: 'img/Door.png',
            textPop: "After taking a closer look you notice the door is locked and it won't budge open.",
            truth: true,
            health: false,
            context: "You look to your left and notice a wooden door. Should I take a closer look?",
            image: 'img/Door.png',
            slot1: {
              // 11
              truth: false,
              health: false,
              context: "Use the axe you bought and axe your way through the door",
              image: 'img/fire axe.jpg',
              slot1: {
                // 111
                context: "Use the axe to chop the guard who hasn't noticed you yet.",
                truth: true,
                health: false,
                image: 'img/fire axe.jpg',
                slot1: {
                  // 1111
                  context: "",
                },
                slot2: {
                  // 1112
                },
                slot3: {
                  // 1113
                }
              },
              slot2: {
                // 112
                context: "Use the axe to break the cell lock to free the man locked inside",
                truth: true,
                health: false,
                image: 'img/icepick.jpg',
                slot1: {
                  // 1121
                },
                slot2: {
                  // 1122
                },
                slot3: {
                  // 1123
                }
              },
              slot3: {
                // this one kills the player 113
                context: "Try to sneak by the guard to reach the door",
                trigger: "death",
              }
            },

            slot2: {
              // 12
              truth: false,
              health: false,
              context: "Use the icepick you bought to try to picklock your way through the door",
              image: "img/icepick.jpg",
              slot1: {
                // 121
                context: "Kill the guard by icepicking him in the head.",
                truth: true,
                health: false,
                image: 'img/icepick.jpg',
                slot1: {
                  // 1211
                  context: "",
                },
                slot2: {
                  // 1212
                },
                slot3: {
                  // 1213
                }

              },
              slot2: {
                // opens when user has hammer and icepick 122
                context: "Use the icepick and hammer to pick the cell lock to free the man locked inside",
                truth: false,
                health: false,
                image: 'img/icepick.jpg',
                slot1: {
                  // 1221
                },
                slot2: {
                  // 1222
                },
                slot3: {
                  // 1223
                }
              },
              slot3: {
                // 123

              }
            },
            slot3: {
              // 13
              truth: true,
              health: false,
              context: "Knock on the door and see if someone opens it up",
              image: "img/knock.jpg",
              slot1: {
                // 131
              },
              slot2: {
                // 132
              },
              slot3: {
                // 133
              }
            }
          },
          slot2: {
            // 2
            textPop: "As you walk towards the box. You notice a man peeking out of the box. 'STOP!' he yelled... You got any chocolate? I'll trade you. Since i'm trying to dig out of here the icepick's going to cost you 2 chocolate bars",
            imagePop: "img/box.png",
            context: "You notice a box in the corner of the room. Walk close to examine the box",
            truth: true,
            image: 'img/closedbox.jpg',
            slot1: {
              // 21
              textPop: "You traded a chocolate bar for an axe",
              imagePop: "img/fire axe.jpg",
              context: "Trade a choclate bar for an fire axe. I might be able to axe something later",
              truth: true,
              image: "img/fire axe.jpg",
              slot1: {axe: true, restart: true},
              slot2: {axe: true, restart: true},
              slot3: {axe: true, restart: true}
            },
            slot2: {
              // 22
              textPop: "You traded a chocolate bar for an icepick",
              imagePop: "img/icepick.jpg",
              context: "Trade your golden coin for an icepick. Not sure what i'll use this for, but it might come in handy",
              truth: true,
              image: "img/icepick.jpg",
              slot1:{icepick: true, restart: true},
              slot2:{icepick: true, restart: true},
              slot3:{icepick: true, restart: true}
            },
            slot3: {
              // 23
              textPop: "You traded a chocolate bar for an hammer",
              imagePop: "img/hammer.jpg",
              context: "Trade your golden coin for a hammer. I can't think of a time that i'll need this besides hammertime.",
              truth: true,
              slot1:{hammer: true, restart: true},
              slot2:{hammer: true, restart: true},
              slot3:{hammer: true, restart: true},
              image: "img/hammer.jpg"
            }
          },
          slot3: {
            // 3
            imagePop: "img/vent.jpg",
            textPop: "You walk towards the vent and try to open it, but it won't budge. You start to hear noise coming from the door",
            context: "You look in the upper right corner and noticed a closed vent. Should i take a closer look?",
            truth: true,
            health: false,
            image: 'img/vent.jpg',
            slot1: {
              // 31
              textPop: "You use the hammer to pry open the vent and it works!",
              imagePop: "img/fire axe.jpg",
              context: "I can try to use my hammer to yank it open",
              truth: false,
              health: false,
              image: 'img/hammer.jpg',
              slot1: {
                // 311
              },
              slot2: {
                // 312
              },
              slot3: {
                // 313
              }
            },
            slot2: {
              // 32
              imagePop: "img/punch.jpg",
              textPop: "I start reckless punching the vent like a maniac, and end up hurting myself. That hurt a lot. Fortuantely it worked. I crawled inside the vent and made my way through and am stopped by a large fan, and notice another passage to the right. What should i do?",
              context: "Maybe i can smash it open with my bare fists!!!!!",
              health: false,
              truth: true,
              image: 'img/punch.jpg',
              slot1: {
                // 321
                imagePop: "img/hammer.jpg",
                textPop: "It WORKED! The fan was jammed long enough for me to be able to get through and pull out the hammer from the other side. Blinded by the bright light i realized that i was outside the building and now in the middle of an airfield.",
                context: "I can try to jam the fan with the hammer i bought from the crazy man",
                image: "img/ventfan.jpg",
                healthDMG: Math.floor(Math.random()*21),
                truth: false,
                health: true,
                slot1: {},
                slot2: {},
                slot3: {}
              },
              slot2: {
                // 322
                imagePop: "img/punch.jpg",
                textPop: "I started punching relentlessly and ended up cutting my hands really badly. That was a terrible idea.",
                context: "Maybe i can punch the fan out with my muscles!!!",
                image: "img/punch.jpg",
                truth: true,
                health: false,
                slot1: {
                  health: true,
                  healthDMG: Math.floor(Math.random()*60),
                },
                slot2: {},
                slot3: {}
              },
              slot3: {}
              // 323

            },
            slot3: {
              // 33
              imagePop: "img/soldier1.png",
              textPop: "A large soldier walks into a room wielding a gun. 'Hey you!' He yelled. 'What are you doing?'",
              context: "I should call out to see what that noise was",
              truth: true,
              health: false,
              image: 'img/scream.jpg',
              slot1: {
                // 331 DEAD
                imagePop: "img/dead.png",
                textPop: "You went for the kudo chop to his neck, but he moved out of the way and shot you dead. GAME OVER",
                context: "I should kudo chop him in the neck before he does something",
                image: 'img/karatechop.jpg',
                truth: true,
                health: false,
                slot1: {
                  health: true,
                  healthDMG: 100,
                  restart: true
                },
                slot2: {restart: true},
                slot3: {restart: true}
                // DEAD
              },
              slot2: {
                // 332
                imagePop: "img/soldier fallen.png",
                health: false,
                truth: true,
                textPop: "That worked! He's temporary stunned, i need to act fast!",
                context: "Charge kick him in the nuts before he can react",
                image: "img/kick.jpeg",
                slot1: {
                  // 3321
                  context: "Take the gun away from him",
                  image: "img/gun.png",
                  textPop: "You dive for his weapon, but he doesn't give it up without a fight. After a short brawl you were able to snag the weapon off him and killed the soldier. Once you caught your breath you exited through the door entering a long hallway full of empty cells and noticed another door at the end. As you walked towards the door you noticed one of the cells actually had a man in it. He's about twice your size, and hasn't said a word since you both noticed eachother. What should i do?",
                  imagePop: "img/gun.png",
                  health: false,
                  truth: true,
                  slot1:{
                    gun: true,
                    health: true,
                    healthDMG: Math.floor(Math.random()*60),
                    truth: true,
                    context: "Find a way to break the man out",
                    image: "img/man.png",
                    textPop: "I decided that my best luck to get him out was to search the soldier I killed earlier and with my luck I had found just the one. After opening his cell the both of us decided that our best luck for survival was to help eachother escape. We agreed and exited out of door at the end of the hallway right from the frying pan into the fire. As I opened the door we had just stepped into dinning hall full of 6 soldiers eating food off their trays. They all simultaneously looked up confused. I need to act fast, what should i do? ",
                    imagePop: "img/soldiers.jpg",
                    // dinning hall
                    slot1: {
                      // 3321
                      man: true,
                      context: "Flip one of the dinning tables over and take cover behind it",
                      image: "img/cover.jpg",
                      textPop: "You flip the table over before they have any chance to react and take cover behind it with the man. After we both got behind cover they all started to fire their bullets towards out table. That was a good move. I've got to act fast.",
                      imagePop: "img/cover.jpg",
                      health: false,
                      truth: true,
                      slot1: {
                        // add kill man function
                        context: "Make a run for the door",
                        image: "img/running.jpg",
                        textPop: "I ran towards the door leaving the man behind to fight for himself. As I ran away I was hit with a couple bullets, but was able to escape only with some scratches. Once I stepped outside the door I realized that this was some kind of military airport that they were holding us at. I need to think of a plan before those soldiers catch up to me.",
                        imagePop: "img/airport.jpg",
                        truth: true,
                        health: false,
                        slot1: {
                          health: true,
                          healthDMG: Math.floor(Math.random()*51),
                        },
                        slot2: {

                        },
                        slot3: {}
                      },
                      slot2: {
                        context: "Pull out your gun and start shooting at the soldiers while you have the element of surprise.",
                        image: "img/shooting.jpg",
                        textPop: "I still had the element of surprise on them i was able to pick off 3 easily. The other 3 were more difficult, we took a beating, but with the man's help we were able to persevere. After it all ended we bandaged our wounds and continued out the exit. Once we were outside i realized that we were at an airfield. We need to act fast before we are spotted.",
                        imagePop: "img/airport.jpg",
                        truth: true,
                        health: false,
                        slot1: {
                          health: true,
                          healthDMG: Math.floor(Math.random()*31),
                        },
                        slot2: {},
                        slot3: {}
                      },
                      slot3: {
                        context: "Convince the man to take the charge while you run away.",
                        image: 'img/talk.png',
                        textPop: "After a lot of persuasion under gun fire, i successfully convinced the man to lead the charge. I felt guilty, but it was all about survival now. As the man charged i used that as my opportunity to escape. I was able to escape without taking gunfire, the man didn't make it. Out the exit i noticed that i was on an airfield. I need to come up with a plan before they catch up to me.",
                        imagePop: "img/airport.jpg",
                        man: true,
                        truth: true,
                        health: false,
                        slot1: {},
                        slot2: {},
                        slot3: {}
                      }
                    },
                    slot2: {
                      // add kill man function
                      man: true,
                      context: "Make a straight run for the door",
                      image: "img/running.jpg",
                      textPop: "I decided to make a straight run for the door before they could react in any way. It only kinda worked one of the soldiers was able to get a shoot on me, but i had escaped out the door. The man didn't make it. I realized that this was an airport, i need to act fast before they catch up to me.",
                      imagePop: "img/airport.jpg",
                      truth: true,
                      health: false,
                      slot1: {
                        health: true,
                        healthDMG: Math.floor(Math.random()*31)
                      },
                      slot2: {},
                      slot3: {}
                    },
                    slot3: {
                      context: "Pull out your gun and attack before they get a chance to react.",
                      image: 'img/shooting.jpg',
                      health: false,
                      truth: true,
                      textPop: "You pull out your gun and start firing away. You were able to pick off most of them, but a few were able to grab their gun and fire back. Luckily the man charged them as well, but he got badly hurt. After we cleared the soldiers, we walked outside to realize that we were at an airport. I had to come up with a plan quick before others realized what had happened.",
                      imagePop: "img/airport.jpg",
                      slot1: {
                        health: true,
                        healthDMG: Math.floor(Math.random()*21),
                      },
                      slot2: {},
                      slot3: {}
                    }
                  },
                  slot2:{
                    gun: true,
                  },
                  slot3:{
                    gun: true,
                  }
                },
                slot2: {},
                slot3: {}
              },
              slot3: {
                // 333
              }
            }
          },
        },
        getPlayer: function() {
          if (game.players.player1.health > 0) {
            currentPlayer = game.players.player1
          }
          else {
            currentPlayer = game.players.player2
            if (stop == 0) {
              box()
              stop += 1
              game.paths.slot2.truth = true
            }

          }
        },
        players: {
          // maybe add a man key so that he can die with damage
          player1: {
            name: "Player1",
            total: 0,
            health: 100,
            gun: false,
            axe: false,
            icepick: false,
            radio: false,
            rope: false,
            man: false,
            chocolate: Math.floor((Math.random() * 4))
          },
          player2: {
            name: "Player2",
            total: 0,
            health: 100,
            gun: false,
            axe: false,
            icepick: false,
            radio: false,
            rope: false,
            man: false,
            chocolate: Math.floor((Math.random() * 4))
          },
        }
      }
      var icepickHammer = function() {
        if ((currentPlayer.icepick == true) && (currentPlayer.hammer == true)) {
          game.paths.slot1.slot2.slot2.truth = true
        }
      }
      var axe = function() {
        if (currentPlayer.axe == true) {
          game.paths.slot1.slot1.truth = true
        }
        else {return false}}
      var icepick = function() {
        if (currentPlayer.icepick === true) {
          game.paths.slot1.slot2.truth = true
          game.paths.slot1.slot1.slot2.truth = true
          game.paths.slot1.slot2.slot1.truth = true
          return true
        }
        else {return false;}
      }
      var hammer = function() {
        game.getPlayer()
        if (currentPlayer.hammer === true) {
          game.paths.slot3.slot1.truth = true
          game.paths.slot3.slot2.slot1.truth = true
          return true
        }
        else {return false}
      }
      var box = function() {
        if(currentPlayer.chocolate != 0) {
        currentPlayer.chocolate -= 1
        return true
      }
      else {
        game.paths.slot2.truth = false
        return false
      }}
      var hammerRun = hammer()
      var axeTrue = function () {currentPlayer.axe = true}
      var icepickTrue = function () {currentPlayer.icepick = true}
      var hammerTrue = function () {currentPlayer.hammer = true}
      var gunTrue = function () {currentPlayer.gun = true}
      var manTrue = function () {currentPlayer.man = true}
      var random = function () {Math.floor(random() * 3)}
      var light = Math.floor(Math.random()*21)
      var medium = Math.floor(Math.random()*51)
      var lethal = Math.floor(Math.random()*81)
      var high = Math.floor(Math.random()*60)
      var playerDie = function() {
        game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
        game.getPlayer()
      }
      var healthKill = function(which) {
        var dmgNow = Number(which.healthDMG)
        currentPlayer.health -= dmgNow
        console.log(dmgNow)
      }

// make all the above into a function and change player inventory to functions instead of true and false after game is complete on another branch


game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)

    </script>
  </body>
</html>
