<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Survive Game</title>
    <link rel="stylesheet" href="style.css" media="screen" title="no title" charset="utf-8">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
  </head>
  <body>
    <Header> Survive </header>

    </div>
      <div class="container">
        <img src="" alt="slot3" class="slot" id="slot3" />
        <img src="" alt="slot2" class="slot" id="slot2" />
        <img src="" alt="slot1" class="slot" id="slot1" />
      </div>
      <footer class="container">
        <div class="context3">3</div>
        <div class="context2">2</div>
        <div class="context1">1</div>
      </footer>
    <script>
    var currentPlayer
      var box2 = 0
      var box = function() {
        if(box2 === 0) {
        box += 1
        return true
      }
      else {
        return false
      }}
      var boxRun = box()


      game = {
        slots: $('.slot'),
        slot1: $('#slot1'),
        slot2: $('#slot2'),
        slot3: $('#slot3'),
        context1: $('.context1'),
        context2: $('.context2'),
        context3: $('.context3'),
        nextPath1: function(firstPath) {game.pickPath(firstPath.slot1, firstPath.slot2, firstPath.slot3)},
        nextPath2: function(secondPath) {game.pickPath(secondPath.slot1, secondPath.slot2, secondPath.slot3)},
        nextPath3: function(thirdPath) {game.pickPath(thirdPath.slot1, thirdPath.slot2, thirdPath.slot3)},
        pickPath: function(first, second, third) {
          game.getPlayer()
          game.slot2.unbind('click')
          game.slot3.unbind('click')
          game.slot1.unbind('click')
          // first
          if (first.axe == true) {axeTrue()}
          if (first.icepick == true) {icepickTrue()}
          if (first.hammer == true) {hammerTrue()}
          if (first.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (first.truth == true) {
            game.slot1.on('click', function(){
              game.nextPath1(first)})
          }
          game.slot1.attr('src', first.image)
          game.context1.text(first.context)
          if (first.popup == true) {
            first['pop']()
          }
          // second
          if (second.axe == true) {axeTrue()}
          if (second.icepick == true) {icepickTrue()}
          if (second.hammer == true) {hammerTrue()}
          if (second.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (second.truth == true) {
          game.slot2.on('click',function(){
            game.nextPath2(second)})
          }
          game.slot2.attr('src', second.image)
          game.context2.text(second.context)
          if (second.popup == true) {
            second['pop']()
          }
          // third
          if (third.axe == true) {axeTrue()}
          if (third.icepick == true) {icepickTrue()}
          if (third.hammer == true) {hammerTrue()}
          if (third.restart == true) {
            game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)
          }
          if (third.truth == true) {
            game.slot3.on('click',function(){
            game.nextPath3(third)})
          }
          game.slot3.attr('src', third.image)
          game.context3.text(third.context)
          if (third.popup == true) {
            third['pop']()
          }
        },
        paths: {
          slot1: {
            truth: true,
            context: "You look to your left and notice a wooden door. You try to open it and it's locked. Should I take a closer look?",
            image: 'img/Door.png',
            slot1: {
              truth: true,
              context: "Use the axe you bought and axe your way through the door",
              image: 'img/fire axe.jpg',
              slot1: {
                context: "Use the axe to chop the guard who hasn't noticed you yet.",
                truth: axeRun,
                image: 'img/fire axe.jpg',
                slot1: {
                  context: "",
                },
                slot2: {},
                slot3: {}
              },
              slot2: {
                context: "Use the icepick to open the cell to free the man locked inside",
                truth: icepickRun,
                image: 'img/icepick.jpg',
                slot1: {},
                slot2: {},
                slot3: {}
              },
              slot3: {
                // this one kills the player
                context: "Try to sneak by the guard to reach the door",
                trigger: "death"
              }
            },
            slot2: {
              truth: icepickRun,
              context: "Use the icepick you bought to try to picklock your way through the door",
              image: "img/icepick.jpg",
              slot1: {},
              slot2: {},
              slot3: {}
            },
            slot3: {
              truth: true,
              context: "Knock on the door and see if someone opens it up",
              image: "img/knock.jpg",
              slot1: {},
              slot2: {},
              slot3: {}
            }
          },
          slot2: {
            context: "You notice a box in the corner of the room. Should i check what's inside?",
            truth: boxRun,
            image: 'img/closedbox.jpg',
            // need to set the slot to be able to turn weapon slots into true and bring them back to the start
            slot1: {
              context: "Trade your golden coin for an fire axe. I might be able to axe something later",
              truth: true,
              image: "img/fire axe.jpg",
              slot1: {axe: true, restart: true},
              slot2: {axe: true, restart: true},
              slot3: {axe: true, restart: true}
            },
            slot2: {
              context: "Trade your golden coin for an icepick. Not sure what i'll use this for, but it might come in handy",
              truth: true,
              image: "img/icepick.jpg",
              slot1:{icepick: true, restart: true},
              slot2:{icepick: true, restart: true},
              slot3:{icepick: true, restart: true}
            },
            slot3: {
              context: "Trade your golden coin for a hammer. I can't think of a time that i'll need this besides hammertime.",
              truth: true,
              slot1:{hammer: true, restart: true},
              slot2:{hammer: true, restart: true},
              slot3:{hammer: true, restart: true},
              image: "img/hammer.jpg"
            }
          },
          slot3: {
            context: "You look in the upper right corner and noticed a closed vent. I try to open it and it won't budge Should i take a closer look?",
            truth: true,
            image: 'img/vent.jpg',
            slot1: {
              context: "I can try to use my hammer to yank it open",
              truth: hammerRun,
              image: 'img/hammer.jpg',
              slot1: {},
              slot2: {},
              slot3: {}
            },
            slot2: {
              context: "Maybe i can smash it open with my bare fists!!!!!",
              truth: true,
              image: 'img/punch.jpg',
              slot1: {},
              slot2: {},
              slot3: {}

            },
            slot3: {
              context: "I should call out to see what that noise was",
              truth: true,
              image: 'img/scream.jpg',
              slot1: {},
              slot2: {},
              slot3: {}
            }
          },
        },
        getPlayer: function() {
          if (game.players.player1.health > 0) {
            currentPlayer = game.players.player1
          }
          else {
            currentPlayer = game.players.player2

          }
        },
        players: {
          player1: {
            total: 0,
            health: 10,
            gun: false,
            axe: false,
            icepick: false,
            radio: false,
            rope: false,
            man: false
          },
          player2: {
            total: 0,
            health: 10,
            gun: false,
            axe: false,
            icepick: false,
            radio: false,
            rope: false,
            man: false
          },
        }
      }
      var axeRun = false
      var axe = function() {
        if (currentPlayer.axe == true) {
        axeRun = true
        console.log("run")
      }
        else {axeRun = false}}
      var icepick = function() {
        game.getPlayer()
        if (currentPlayer.icepick === true) {
          return true
        }
        else {return false;}
      }
      var hammer = function() {
        game.getPlayer()
        if (currentPlayer.hammer === true) {
          return true
        }
        else {return false}
      }
      var hammerRun = hammer()
      var icepickRun = icepick()
      var axeTrue = function () {currentPlayer.axe = true}
      var icepickTrue = function () {currentPlayer.icepick = true}
      var hammerTrue = function () {currentPlayer.hammer = true}



game.pickPath(game.paths.slot1, game.paths.slot2, game.paths.slot3)

    </script>
  </body>
</html>
